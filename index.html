<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>life game</title>
        <link rel="stylesheet" type="text/css" href="./css/main.css">
        <script type="text/javascript" src="./js/lib/d3.v3.min.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        <script type="text/javascript" src="./js/cell.js"></script>
        <script type="text/javascript" src="./js/field.js"></script>
        <script type="text/javascript" src="./js/lifeGame.js"></script>
        <script language="javascript" type="text/javascript">
            var lifeGame = null;
            var svg = null;
            var fieldHeight = 0;
            var fieldWidth = 0;
            function createGame() {
                var patternId = parseInt(document.getElementById("pattern").value);
                var initialPopulationRate = parseFloat(document.getElementById("initialRate").value);
                
                // ゲームの初期化
                lifeGame = new LifeGame();
                lifeGame.initialize(fieldHeight, fieldWidth, initialPopulationRate, svg, patternId);
                
                // ゲーム開始
                lifeGame.start();
            };
            function onClickRestart() {
                if (lifeGame) {
                    lifeGame.stop();
                }
                createGame();
            };
        </script>
    </head>
    <body>
        <p>
            pattern
            <select name="pattern" size=1 id="pattern">
                <option value=1>standard</option>
                <option value=2>stripe 1</option>
                <option value=3>stripe 2</option>
                <option value=4>negative</option>
            </select>
        </p>
        <p>
            initial rate
            <select name="initialRate" size=1 id="initialRate">
                <option value=0.1>0.1</option>
                <option value=0.2>0.2</option>
                <option value=0.3>0.3</option>
                <option value=0.4>0.4</option>
                <option value=0.5>0.5</option>
                <option value=0.6>0.6</option>
                <option value=0.7>0.7</option>
                <option value=0.8>0.8</option>
                <option value=0.9>0.9</option>
            </select>
        </p>
        <p>
            <button name="restart" id="restart" onclick="onClickRestart()">restart</button>
        </p>
        <script>
            // 縦・横のピクセル数
            var fieldWidth = 300;
            var fieldHeight = 300;
            
            // SVG
            svg = d3
                .select("body")
                .append("svg")
                .attr("width", fieldWidth)
                .attr("height", fieldHeight)
                .attr("viewport-fill", "black");
            
            createGame();
            
        </script>
    </body>
</html>
